---
import MainHead from "../components/MainHead.astro";
import HeaderLayout from "./HeaderLayout.astro";
import Footer from "../components/Footer.astro";
const { title, description } = Astro.props;
---

<html lang="en">
  <head>
    <MainHead
      title={title}
      description={description}
    />
    <style lang="scss">
      @use "../styles/mixins" as m;
      @use "../styles/variables" as w;

      .wrapper {
        width: min(95%, 65%);
        padding-inline: 2rem;
        /* max-width: calc(100% - 4rem); */
        margin-inline: auto;
      }

      // .wrapper {
      //   display: none;
      //   @include m.for-desktop(w.$desktop) {
      //     display: block;
      //   }
      // }
      .header-padding {
        height: 5rem;
      }
    </style>
  </head>

  <body>
    <div class="wrapper">
      <HeaderLayout />
      <div class="header-padding"></div>
      <slot />

      <Footer />
    </div>
    <script>
      // Add styles
      const addCss = (css: string) => {
        const element = document.createElement("style");
        element.innerText = css;
        const newStyle = document.body.appendChild(element);
        return newStyle;
      };

      // Dark/Light mode
      const colorSchemeToggle = document.querySelector("input[name=checkbox]");

      colorSchemeToggle.addEventListener("change", function () {
        if (this.checked) {
          localStorage.setItem("themeChange-8d23k88", "on");
        } else {
          localStorage.removeItem("themeChange-8d23k88");
        }
        checkTheme();
      });

      function checkTheme() {
        let themeToggle = localStorage.getItem("themeChange-8d23k88");
        if (themeToggle) {
          addCss(":root {--color-bg: #ffffff}");
          addCss(":root {--color-fg: #1b1b1b}");
          addCss(":root {--color-ds: #1b4bf7}");
          addCss(":root {--color-ic: #ffffff}");
        } else {
          addCss(":root {--color-bg: #1b1b1b}");
          addCss(":root {--color-fg: #ffffff}");
          addCss(":root {--color-ds: #ffffff}");
          addCss(":root {--color-ic: #ffffff}");
        }
      }
      checkTheme();

      const hero = document.getElementById("hero");

      function hideHero() {
        if (hero.style.opacity === "0") {
          hero.style.opacity = "1";
        } else {
          hero.style.opacity = "0";
        }
      }

      const navToggle = document.querySelector(".nav-toggle");
      const nav = document.querySelector(".nav");

      const navContainer = document.querySelector(".hamburger-menu");

      navToggle.addEventListener("click", () => {
        nav.classList.toggle("nav--visible");
        navContainer.classList.toggle("nav-transition");
        hideHero();
      });
    </script>
  </body>
</html>
