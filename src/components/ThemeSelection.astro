<div class="theme">
  <!-- <i class="fa-sharp fa-regular fa-lightbulb fa-lg icon"></i> -->
  <!-- <div class="icon"></div> -->
  <svg
    class="sun w-6 h-6"
    fill="none"
    stroke="currentColor"
    viewBox="0 0 24 24"
    xmlns="http://www.w3.org/2000/svg"
    ><path
      stroke-linecap="round"
      stroke-linejoin="round"
      stroke-width="2"
      d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
    ></path>
  </svg>
  <input
    class="toggle"
    type="checkbox"
    name="checkbox"
  />
</div>

<script>
  // Add styles
  const addCss = (css: string) => {
    const element = document.createElement("style");
    element.innerText = css;
    const newStyle = document.body.appendChild(element);
    return newStyle;
  };

  // Dark/Light mode
  const colorSchemeToggle = document.querySelector("input[name=checkbox]");

  colorSchemeToggle.addEventListener("change", function () {
    console.log("Checked");
    if (this.checked) {
      localStorage.setItem("themeChange-8d23k88", "on");
    } else {
      localStorage.removeItem("themeChange-8d23k88");
    }
    checkTheme();
  });

  function checkTheme() {
    let themeToggle = localStorage.getItem("themeChange-8d23k88");
    if (themeToggle) {
      addCss(":root {--color-bg: #ffffff}");
      addCss(":root {--color-fg: #1b1b1b}");
      addCss(":root {--color-ds: #1b4bf7}");
      addCss(":root {--color-ic: #ffffff}");
    } else {
      addCss(":root {--color-bg: #1b1b1b}");
      addCss(":root {--color-fg: #ffffff}");
      addCss(":root {--color-ds: #ffffff}");
      addCss(":root {--color-ic: #ffffff}");
    }
  }
  checkTheme();
</script>

<style lang="scss">
  .theme {
    position: absolute;
    // top: 1rem;
    display: grid;
    align-content: center;
    &:hover,
    &:focus {
      border: 1px solid var(--color-fg);
      border-radius: 50%;
    }
  }

  .theme > * {
    grid-column: 1 / -1;
    grid-row: 1 / -1;
  }

  .sun {
    align-self: center;
    width: 1.5rem;
    height: 1.5rem;
    color: var(--color-fg);
    // z-index: 2;
  }

  .toggle {
    align-self: center;
    justify-self: center;
    opacity: 0;
    cursor: pointer;
    height: 1.2em;
    width: 1.2em;
    z-index: 3;
  }
</style>
